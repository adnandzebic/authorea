\section{Warm-up: DTMF Synthesis}
\subsection{DTMF Dial Function}
\begin{lstlisting}[language=Matlab]


\begin{lstlisting}[language=Matlab]
function xx = dtmfdial(keyNames, fs)
    dtmf.keys = ...
        ['1', '2', '3', 'A';
         '4', '5', '6', 'B';
         '7', '8', '9', 'C';
         '*', '0', '#', 'D'];

    dtmf.colTones = ones(4,1) * [1209, 1336, 1477, 1633];
    dtmf.rowTones = [697; 770; 852; 941] * ones(1,4);

    xx = [];

    % --- START THE FOR LOOP --- %
    for ii = 1:length(keyNames)
        switch keyNames(ii) % This is case sensitive
            case 0
                [jj, kk] = find('0' == dtmf.keys); % Fetches the row-column indices
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs); % First signal
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs); % Second Signal
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 1
                [jj, kk] = find('1' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 2
                [jj, kk] = find('2' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 3
                [jj, kk] = find('3' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 4
                [jj, kk] = find('4' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 5
                [jj, kk] = find('5' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 6
                [jj, kk] = find('6' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 7
                [jj, kk] = find('7' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 8
                [jj, kk] = find('8' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 9
                [jj, kk] = find('9' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case '*'
                [jj, kk] = find('*' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case '#'
                [jj, kk] = find('#' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 'A'
                [jj, kk] = find('A' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 'B'
                [jj, kk] = find('B' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 'C'
                [jj, kk] = find('C' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            case 'D'
                [jj, kk] = find('D' == dtmf.keys);
                dtmf.keys(jj, kk)
                xx1 = cos(2 * pi * dtmf.colTones(jj) * (0:1599) / fs);
                xx2 = cos(2 * pi * dtmf.rowTones(kk) * (0:1599) / fs);
                xx3 = cos(pi / 2 * (0:399) / fs); % Creates a delay of 0.05 secs
                xx = [xx, xx1 + xx2]
                xx = [xx, xx3]; % Concatenate the delay signal
            otherwise
                disp('You wrote something else')
        end % close the switch statement
    end % close the for loop
end % close the function loop
\end{lstlisting}
Wc = 0.2 * pi; % passing frequency
L = 51; % length of filter (inversely correlated with bandwidth)
n = 0:L-1;
ww = 0:pi/1000:pi;
bb = cos(Wc * n); % coefficients (extracted from given h[n])
HH = freqz(bb, 1 ,ww); % frequency response

subplot(211)
plot(ww, abs(HH))
title('Frequency Response')
xlabel('Frequency')
ylabel('Amplitude')

max_value = max(abs(HH)); % get the highest peak value of the frequency response
bb2 = 1 / max_value * bb; % normalize the coefficients
HH2 = freqz(bb2,1,ww);

subplot(212)
plot(ww, abs(HH2))
title('Normalized Frequency Response')
xlabel('Frequency')
ylabel('Amplitude')

passband = find(abs(HH2) >= 0.707); % fetches the passing frequencies
lower_freq = ww(passband(1)); % gets the lower 3dB freq value
upper_freq = ww(passband(length(passband))); % upper 3dB freq value
BW = abs(ww(passband(1)) - ww(passband(length(passband)))); % bandwidth

samp_rate = 8000; % 8000Hz
lower_analog = lower_freq * 8000 / (2 * pi); % 736 Hz
upper_analog = upper_freq * 8000 / (2 * pi); % 868 Hz
\end{lstlisting}